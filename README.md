# SuperCert- Transcript Verification System for Engineering Colleges

SuperCert is a web application that can used to store academic transcripts issued by University immutably in blockchain in form of CID (CID is generated by storing the transcript in an IPFS prior to storing in blockchain.) The CID generated will be shared with students in form of raw hash (here we have done it using email) or QR Code. 
Students can share the recieved form of transcript (CID or QR code) with the university (higher education institutes) and they can use the same website to efficiently verify the same. 
Removes intermediary (here it is university where the student is affiliated with) and makes the process quick, simple and efficient for both student and verification authority.

__Paper Link__
[Research Paper](https://doi.org/10.32628/CSEIT2410266)


This project uses following tools and technologies
- **Ethereum (Sepolia)**
- **React (frontend)**
- **ExpressJs (Backend)**
- **Pinata (IPFS)**
- **Hardhat and EtherJs (for interacting with blockchain)**
- **MongoDB (for logging trasactions)**
- **Solidity and Chainlinkfor smart contract**
- **OpenCV and Tesseract OCR (for document verification)**

## Architecture 

Application Structure 
<img src="https://github.com/midnight-mira/SuperCert--Transcript-Verification-System-for-Engineering-Colleges-using-Blockchain/blob/main/img/architecture.png" align="center">
___________

Block diagram
<img src="https://github.com/midnight-mira/SuperCert--Transcript-Verification-System-for-Engineering-Colleges-using-Blockchain/blob/main/img/block.png" align="center">
__________

Sequence Diagram
<img src="https://github.com/midnight-mira/SuperCert--Transcript-Verification-System-for-Engineering-Colleges-using-Blockchain/blob/main/img/sequence.png" align="center">
_______

Activity Diagram
<img src="https://github.com/midnight-mira/SuperCert--Transcript-Verification-System-for-Engineering-Colleges-using-Blockchain/blob/main/img/activity.png" align="center">
___________________

## Features
1. **Admin login using Jwt**
2. **Records ethereum transaction information in server**
3. **Allows admin to upload document below 10MB**
4. **Sends document CID to the student on their emailId**
5. **Verifier can verify the document by using CID (hash)**
6. **Advanced document verification using template matching**
7. **Train new document templates for different certificate formats**

________________________

There are 3 main folders viz:
1. Client (for frontend)
2. Server (for mongoDB and RestAPIs)
3. Parent file (which contains contracts and abis)
4. Scripts (for Python document verification scripts)

Fork the repository and follow along with _README_ in each folder to correctly configure and execute the contract files.


__STEP 1. Install the npm file (parent directory)__

   ```js
   npm install
   ```
__STEP 2. Create metamask account and create web3 sepolia account on alchemy.__

after setting up metamask account, download the metamask extension. Create an alchemy account, create a project and copy its https api key. paste it in _hardhat.config.js_ file

```js

url: `https://eth-sepolia.g.alchemy.com/v2/your-api-key`,
accounts: [SEPOLIA_PRIVATE_KEY] //private key is one time key that you can see only once when the project is created, be sure to store it somewhere safe.

```

for get faucet ether use the following website:
https://learnweb3.io/faucets/sepolia/

__STEP 3. compile and deploy smart contract.__

Compile contract using

```shell

$ npx hardhat compile

```
This creates a artifacts and abi-file.

For deploying the contract exceute _scripts/deploy.js_

```bash

$ npx hardhat run scripts/deploy.js --network sepolia 

```
The above command logs the sepolia testnet address for both the smart contracts.Replace this address in _client/components/user/Verify.jsx_ and _client/components/admin/AddDocument.jsx_

```js

const paymeAddr = 'Your testnet address for payme contract'
const Address = 'Your testnet address for IPFSHashStorage contract'

```
for checking and verifying transactions on the testnet go to:

https://sepolia.etherscan.io/address/your-testnet-address

**TO DO**
1. Fix automatic conversion chainlink contract.
2. Add mappings to link the CID's with the account of the verifier to efficiently utilize single transaction.
3. Add code to download the document on verifier's device.
4. Create a local IPFS node.

node scripts/deploy-ethers.js
https://myaccount.google.com/apppasswords

## Certificate Verification System

The system now includes an advanced certificate verification feature that validates certificates before they are stored on the blockchain. This ensures that only legitimate certificates are added to the system.

### Features

1. **Template Matching**: Compares uploaded certificates against a verified template
2. **Logo and Seal Verification**: Ensures university logos and seals are present and correct
3. **Layout Analysis**: Validates the structural layout of the document
4. **Text Recognition**: Extracts and validates key text elements including:
   - University/board name
   - Student name
   - Roll/seat number
   - Program details
   - Exam date/year

### Setup Instructions

1. **Install Python Dependencies**
   ```bash
   cd scripts
   pip install -r requirements.txt
   ```

2. **Install Tesseract OCR**
   - **Windows**: Download installer from [https://github.com/UB-Mannheim/tesseract/wiki](https://github.com/UB-Mannheim/tesseract/wiki)
   - **macOS**: `brew install tesseract`
   - **Linux**: `sudo apt install tesseract-ocr`

3. **Start Backend Services**
   ```bash
   cd server
   npm install
   npm start
   ```

### Document Verification Process

1. **Template Training**:
   - Admin uploads reference templates through the admin portal
   - System extracts features including text patterns, layout, and visual elements
   - Templates are stored for future verification

2. **Document Verification**:
   - User uploads a document to verify
   - System compares document against trained templates
   - Multiple verification checks are performed:
     - Text pattern matching (30%)
     - Layout comparison (30%)
     - Structural element verification (seals, logos) (40%)
   - Generates a verification score (0-100%)
   - Returns detailed verification results with highlighted elements

3. **Blockchain Integration**:
   - Verified documents can be stored on the blockchain
   - CID and verification status are linked

### User Interface

1. **Template Trainer (Admin)**:
   - Upload template images
   - View extracted features and patterns
   - Manage template library

2. **Document Verifier (Users)**:
   - Upload documents for verification
   - Select template to verify against
   - View verification score and detailed analysis
   - Store verified documents on blockchain

## Document Verification System

The application now includes an enhanced document verification system that automatically detects whether documents match known templates. This helps prevent fraud and ensures document authenticity.

### Features

- **Automatic Template Matching**: Upload documents and automatically match them against known templates
- **Visual Analysis**: View detailed comparison between the uploaded document and matched template
- **Similarity Scores**: See specific scores for text, layout, seal, and other elements
- **Visualization**: Get visual feedback on what parts of the document were analyzed
- **Verification Flexibility**: Proceed with document processing even if verification fails

### Running the Verification Service

1. Install Python dependencies:
   ```bash
   cd pythonService
   pip install -r requirements.txt
   ```

2. Start the verification service:
   ```bash
   node start_verification_service.js
   ```

3. Train templates by placing sample templates in the `pythonService/templates` directory.

### Verification Process

1. Upload a document image
2. Click "Verify Document"
3. The system will automatically match against known templates
4. View the verification results with detailed similarity scores
5. Proceed to data extraction if verified, or choose "Extract Data Anyway" for unverified documents

### Customizing Templates

To add new document templates:

1. Place template images in the `pythonService/templates` directory
2. Access the verification API directly at `http://localhost:5000/train` to train new templates
3. The system will automatically update to include new templates for matching

# SuperCert

A blockchain-based document verification and management system for educational certificates.

## Features

- Document verification using AI/ML techniques
- Blockchain-based storage of document hashes for immutability
- OCR data extraction from educational certificates
- User-friendly interface for document upload and verification
- Admin panel for document management
- Email notifications for document verification

## Architecture

SuperCert consists of the following components:

1. React Frontend (client directory)
2. Node.js API Server (server directory)
3. Python Document Verification Service (pythonService directory)
4. Ethereum Smart Contract (contracts directory)

## Prerequisites

- Node.js (v14 or later)
- Python 3.8 or later
- MongoDB
- Ethereum wallet (like MetaMask)
- Tesseract OCR

## Setup Instructions

### Clone the Repository

```bash
git clone https://github.com/yourusername/supercert.git
cd supercert
```

### Environment Configuration

Copy the example environment file and configure it:

```bash
cp .env.example .env
```

Edit the `.env` file with your specific configuration.

### Install Dependencies

#### Server (Node.js)

```bash
cd server
npm install
```

#### Client (React)

```bash
cd client
npm install
```

#### Python Service

```bash
cd pythonService
pip install -r requirements.txt
```

### Setup Tesseract OCR

#### Windows
1. Download the installer from [https://github.com/UB-Mannheim/tesseract/wiki](https://github.com/UB-Mannheim/tesseract/wiki)
2. Install and add to your PATH

#### macOS
```bash
brew install tesseract
```

#### Linux
```bash
sudo apt-get install tesseract-ocr
```

### Database Setup

Ensure MongoDB is running. The server will automatically create the required collections.

### Contract Deployment

If you need to deploy the contract:

```bash
npx hardhat run scripts/deploy.js --network sepolia
```

Note the contract address and update it in the `.env` file.

## Running the Application

### Start the Python Service

```bash
cd pythonService
python app.py
```

### Start the Node.js Server

```bash
cd server
npm start
```

### Start the Client

```bash
cd client
npm run dev
```

## Usage

1. Access the client at `http://localhost:5173`
2. Register/Login with your credentials
3. Use the Admin panel to upload and verify documents
4. Use the Verification page to check document authenticity

## Folder Structure

- `/client` - React frontend application
- `/server` - Node.js API server
- `/pythonService` - Python document verification service
- `/contracts` - Ethereum smart contracts
- `/sample_images` - Sample document templates for testing

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Acknowledgments

- OpenZeppelin for smart contract libraries
- Ethereum community for blockchain tools
- Tesseract OCR for document text extraction

# Image Feature Extraction and Template Validation

This script provides functionality for extracting features from images and validating image templates based on quality metrics.

## Prerequisites

- Python 3.7 or higher
- Tesseract OCR engine installed on your system
  - Windows: Download and install from [GitHub Tesseract Release](https://github.com/UB-Mannheim/tesseract/wiki)
  - Linux: `sudo apt-get install tesseract-ocr`
  - macOS: `brew install tesseract`

## Installation

1. Clone this repository
2. Install the required Python packages:
   ```bash
   pip install -r requirements.txt
   ```

## Usage

The script can be used in two modes:

### Feature Extraction

To extract features from an image:

```bash
python main.py --image_path path/to/image.jpg --template_name template1 --extract_features
```

### Template Validation

To validate if an image meets the template requirements:

```bash
python main.py --image_path path/to/image.jpg --template_name template1 --validate
```

## Validation Criteria

The script checks for the following criteria:
- Minimum dimensions: 300x300 pixels
- Minimum blur score: 100 (higher is better)
- Minimum contrast: 30

## Output

The script outputs JSON-formatted data containing:
- Image dimensions
- SIFT keypoints
- Quality metrics (blur score, contrast)
- Validation results (if validation mode is used)